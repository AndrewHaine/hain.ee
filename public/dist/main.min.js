webpackJsonp([0],{156:function(e,t,r){"use strict";t.limit=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20;if(!e)return!1;var r=e.split("");return r.slice(0,t).join("")+(r.length>t?"...":"")},t.copyToClipboard=function(e){var t=document.createElement("textarea");t.value=e,document.body.appendChild(t),t.focus(),t.setSelectionRange(0,t.value.length),document.execCommand("copy"),document.body.removeChild(t)}},160:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var o=r(14),a=n(o),u=r(92);r(251);var i=r(253),s=n(i);(0,u.render)(a.default.createElement(s.default,null),document.getElementById("form-container"))},251:function(e,t){},253:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=r(14),c=n(l),f=r(254),p=n(f),d=r(348),h=n(d),m=r(367),y=n(m),v=r(368),_=n(v),b=r(382),w=n(b),g=function(e){function t(){a(this,t);var e=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={currentRequestKey:"",currentUrlData:{},csrfToken:"",formErrors:{},processing:!1,rootURL:"",showPreviewBox:!1},e._handleShortenedURL=e._handleShortenedURL.bind(e),e._handleURLMeta=e._handleURLMeta.bind(e),e}return i(t,e),s(t,[{key:"componentWillMount",value:function(){var e=document.querySelector('meta[name="mystery-token"]').getAttribute("content");this.setState({csrfToken:e,rootURL:window.location.origin}),h.default.defaults.headers.post["x-csrf-token"]=e}},{key:"_handleForm",value:function(e){var t=this;e.preventDefault();var r=this.url.value;if(!r)return this.setState({formErrors:{status:!0,message:"Please enter a URL to shorten"}});this.setState({processing:!0,showPreviewBox:!0,currentRequestKey:p.default.generate(10)},function(){t._requestShortenedURL(r).then(t._handleShortenedURL).catch(function(e){t.setState({showPreviewBox:!1,formErrors:{status:!0,message:e.message}})}),t._requestURLMeta(r).then(t._handleURLMeta).catch(function(e){return console.error("There was an error processing the Metadata for this website: "+e.message)})})}},{key:"_requestShortenedURL",value:function(e){var t={url:e,requestKey:this.state.currentRequestKey};return h.default.post("/addURL",t)}},{key:"_handleShortenedURL",value:function(e){this.setState({processing:!1,showPreviewBox:!0,currentUrlData:Object.assign(this.state.currentUrlData,e.data)}),document.getElementById("url-input").value=this.state.rootURL+"/"+e.data.idString}},{key:"_requestURLMeta",value:function(e){var t={url:e,requestKey:this.state.currentRequestKey};return h.default.post("/getURLMeta",t)}},{key:"_handleURLMeta",value:function(e){e.data.requestKey===this.state.currentRequestKey&&this.setState({currentUrlData:Object.assign(this.state.currentUrlData,e.data),showPreviewBox:!!e.data.url})}},{key:"render",value:function(){var e,t=this;return c.default.createElement("div",{className:"urlform__container"},c.default.createElement("form",{id:"url-form",action:"/addURL",method:"POST",encType:"multiform/form-data",className:"url-form",onSubmit:function(e){return t._handleForm(e)}},c.default.createElement("input",{type:"hidden",name:"_csrf",value:this.state.csrfToken}),c.default.createElement("div",{className:"field text"},c.default.createElement("label",{htmlFor:"url"},"Enter your URL"),c.default.createElement("input",{id:"url-input",ref:function(e){return t.url=e},type:"text",onChange:function(){return t.setState({formErrors:{},processing:!1,showPreviewBox:!1,currentUrlData:{}})},name:"url",placeholder:"Enter a URL"}),c.default.createElement(w.default,{erroring:this.state.formErrors})),c.default.createElement("div",{className:"form__actions"},c.default.createElement(y.default,{processing:this.state.processing,urlData:this.state.currentUrlData,rootURL:this.state.rootURL}))),c.default.createElement(_.default,(e={processing:this.state.processing,urlData:this.state.currentUrlData},o(e,"processing",this.state.processing),o(e,"showPreviewBox",this.state.showPreviewBox),e)))}}]),t}(c.default.Component);t.default=g},261:function(e,t){},299:function(e,t){},300:function(e,t){},367:function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=r(156),s=r(14),l=function(e){return e&&e.__esModule?e:{default:e}}(s),c=function(e){function t(){n(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={valueCopied:!1,valueToCopy:""},e}return a(t,e),u(t,[{key:"componentWillUpdate",value:function(e,t){var r=e.urlData.idString;r&&""!=r&&(t.valueToCopy=e.rootURL+"/"+r),r||(t.valueCopied=!1)}},{key:"copyLink",value:function(e){e.preventDefault(),(0,i.copyToClipboard)(this.state.valueToCopy),this.setState({valueCopied:!this.state.valueCopied})}},{key:"render",value:function(){var e=this;if(this.props.processing)return l.default.createElement("button",{className:"button__shorten button__shorten--processing"}," Working ");if(this.props.urlData.idString&&""!==this.props.urlData.idString){var t=this.state.valueCopied?"Copied!":"Copy";return l.default.createElement("button",{className:"button__shorten button__shorten--copy",onClick:function(t){return e.copyLink(t)}}," ",t," ")}return l.default.createElement("button",{className:"button__shorten"}," Shorten ")}}]),t}(l.default.Component);t.default=c},368:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(14),l=n(s),c=r(369),f=r(381),p=n(f),d=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),i(t,[{key:"render",value:function(){var e=l.default.createElement("div",{key:this.props.showPreviewBox,className:"shorten-preview"},l.default.createElement(p.default,{urlData:this.props.urlData}));return l.default.createElement(c.CSSTransitionGroup,{transitionName:"preview-box-animation",transitionAppear:!0,transitionAppearTimeout:500,transitionEnter:!0,transitionLeave:!0,transitionLeaveTimeout:300,transitionEnterTimeout:500},this.props.showPreviewBox?e:null)}}]),t}(l.default.Component);t.default=d},381:function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=r(14),s=function(e){return e&&e.__esModule?e:{default:e}}(i),l=r(156),c=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),u(t,[{key:"render",value:function(){var e=(0,l.limit)(this.props.urlData.title,50)||"",t=(0,l.limit)(this.props.urlData.url,30)||"",r=this.props.urlData.url?"url('"+(this.props.urlData.imgSrc||"/images/h-icon.svg")+"')":"";return s.default.createElement("div",{className:this.props.urlData.url?"shorten-preview__content shorten-preview__content--active":"shorten-preview__content"},s.default.createElement("div",{className:"shorten-preview__image",style:{backgroundImage:r}}),s.default.createElement("div",{className:"shorten-preview__text"},s.default.createElement("div",{className:"shorten-preview__title"},e),s.default.createElement("a",{className:"shorten-preview__link",title:this.props.urlData.title,href:this.props.urlData.url,rel:"noopener",target:"_blank"},t)))}}]),t}(s.default.Component);t.default=c},382:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(14),o=function(e){return e&&e.__esModule?e:{default:e}}(n),a=function(e){return o.default.createElement("span",{className:"form-error","data-erroring":e.erroring.status},o.default.createElement("strong",null,"Error: ")," ",e.erroring.message)};t.default=a}},[160]);